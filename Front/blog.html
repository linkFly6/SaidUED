<!DOCTYPE html>
<html xmlns="http://www.w3.org/1999/xhtml">
<head>
    <meta http-equiv="Content-Type" content="text/html; charset=utf-8" />
    <title>&nbsp;听说 - 你听，你静静听</title>
    <link href="../Content/Style/Global.css" rel="stylesheet" />
    <meta name="keywords" content="linkFly,Said,听说,blog" />
    <meta name="author" content="linkFly" />
    <link href="../Content/Style/font-awesome.min.css" rel="stylesheet" />
    <link href="../Content/Style/blog.css" rel="stylesheet" />
    <link href="../Content/Style/highlight/github.css" rel="stylesheet" />
    <!--<link href="../Content/Style/highlight/default.css" rel="stylesheet" />-->
    <!--<link href="../Content/Style/highlight/vs.css" rel="stylesheet" />-->
</head>
<body>
    <section id="said-page">
        <header id="header">
            <div id="readState" class="read-state" style="width: 40%;"></div>
            <nav id="nav">
                <ul id="nav-flip">
                    <li><a href="javascript:void(0);">首页</a></li>
                    <li><a href="javascript:void(0);">blog</a></li>
                    <li><a href="javascript:void(0);" class="nav-active">听说</a></li>
                    <li><a href="javascript:void(0);">实验室</a></li>
                    <li><a href="javascript:void(0);">关于</a></li>
                </ul>
                <div id="said-search-con" style="width: 50px;">
                    <div id="said-search">
                        <!--hover : said-search-focus-->
                        <div id="said-search-btn" title="搜索">
                        </div>
                        <form action="/" id="said-search-form">
                            <input autocomplete="off" id="said-search-input" type="text" placeholder="搜索你感兴趣的" />
                        </form>
                    </div>
                </div>
                <span id="nav-hover" style="left: 140px;"></span>
            </nav>
        </header>
        <section id="content">
            <div class="content-bg">
                <div class="content-bg-img" style="left: 0;"></div>
            </div>
            <section class="center">
                <nav id="a-nav" class="nav "><!--fixed-->
                    <div class="nav-title">目录</div>
                    <div class="an-c">
                        <div class="nav-bg">&nbsp;</div>
                        <div class="an-body">
                            <ul class="anb-box">
                                <li class="active"><a href="#articleHeader0">Promise应对的问题</a></li>
                                <li><a href="#articleHeader1">Promise的解决</a></li>
                                <li><a href="#articleHeader2">ECMAScript 6 Promise</a></li>
                                <li style="list-style:none;">
                                    <ul>
                                        <li><a href="#articleHeader3">Promise.prototype.then</a></li>
                                        <li><a href="#articleHeader3">Promise.constructor</a></li>
                                    </ul>
                                </li>
                                <li>
                                    <a href="#articleHeader4">参考和引用</a>
                                </li>
                                <li><a href="#articleHeader5">Promise/A+规范</a></li>
                                <li><a href="#articleHeader6">ECMAScript 6 入门 - Promise对象</a></li>
                                <li><a href="#articleHeader7">Promise启示录</a></li>
                            </ul>
                        </div>
                    </div>

                </nav>
                <h1 class="blog-title">世界很大，风住过这里世界很大，风住过这里世界很大，风住过这里世界很大，风住过这里世界很大，风住过这里世界很大，风住过这里世界很大，风住过这里</h1>
                <article class="blog-article">
                    <div class="html">
                        <section class="blog-content">
                            <div class="html">
                                <!--<h1 id="javascript1ecmascript6promise">JavaScript异步编程（1）-ECMAScript 6的Promise对象</h1>-->
                                <p>
                                    JavaScript的Callback机制深入人心。而JavaScript世界同样充斥的各种异步操作（异步IO、setTimeout等）。异步和Callback的搭载很容易就衍生"回调金字塔"。——由此产生Deferred/Promise。
                                </p>
                                <p>Deferred起源于Python，后来被CommonJS挖掘并发扬光大，得到了大名鼎鼎的Promise，并且已经纳入ECMAScript 6（JavaScript下一版本）。</p>
                                <p>Promise/Deferred就是是当今最著名的异步模型，不仅强壮了JavaScript Event Loop（事件轮询）机制下异步代码的模型，同时增强了异步代码的可靠性。—— 匠者为之，以惠匠者。</p>

                                <blockquote>
                                    <p>本文内容如下：  </p>

                                    <ul>
                                        <li>Promise应对的问题</li>
                                        <li>Promise的解决</li>
                                        <li>ECMAScript 6 Promise</li>
                                        <li>参考和引用</li>
                                    </ul>
                                </blockquote>

                                <h2 id="promise">Promise应对的问题</h2>

                                <p>JavaScript充斥着Callback，例如下面的代码：</p>

<pre class="highlight-source"><code class="javascript hljs">(<span class="hljs-function"><span class="hljs-keyword">function</span> (<span class="hljs-params">num</span>) </span>{<span class="hljs-comment">//从外面接收一个参数</span>
                                <span class="hljs-keyword">var</span> writeName = <span class="hljs-function"><span class="hljs-keyword">function</span> (<span class="hljs-params">callback</span>) </span>{
                                <span class="hljs-keyword">if</span> (num === <span class="hljs-number">1</span>)
            callback();
    }
    writeName(<span class="hljs-function"><span class="hljs-keyword">function</span> (<span class="hljs-params"></span>) </span>{<span class="hljs-comment">//callback</span>
                                <span class="hljs-built_in">console</span>.log(<span class="hljs-string">"i'm linkFly"</span>);
    });
})(<span class="hljs-number">1</span>);
</code></pre>

                                <p>把一个函数通过参数传递，那么这个函数叫做Callback（回调函数）。</p>

                                <p>JavaScript也充斥着异步操作——例如ajax。下面的代码就是一段异步操作：</p>

<pre class="highlight-source"><code class="javascript hljs">    <span class="hljs-keyword">var</span> name;
    setTimeout(<span class="hljs-function"><span class="hljs-keyword">function</span> (<span class="hljs-params"></span>) </span>{
        name = <span class="hljs-string">'linkFly'</span>;
    }, <span class="hljs-number">1000</span>);<span class="hljs-comment">//1s后执行</span>
                                <span class="hljs-built_in">console</span>.log(name);<span class="hljs-comment">//输出undefined</span>
</code></pre>

                                <p>
                                    这段代码的运行逻辑是这样的：
                                    <img src="http://images.cnblogs.com/cnblogs_com/silin6/596820/o_promiseError.png" alt="Callback Demo" title="">
                                </p>

                                <p>我们的总是遇见这样的情况：一段代码异步执行，后续的代码却需要等待异步代码的，如果在异步代码之前执行，就会如上面的console.log(name)一样，输出undefined，这并不是我们想要的效果。</p>

                                <p>类似的情况总是发生在我们经常要使用的ajax上：</p>

<pre class="highlight-source"><code class="javascript hljs">    $.ajax({
        url: <span class="hljs-string">'http://www.cnblogs.com/silin6/map'</span>,
        success: <span class="hljs-function"><span class="hljs-keyword">function</span> (<span class="hljs-params">key</span>) </span>{
                                <span class="hljs-comment">//我们必须要等待这个ajax加载完成才能发起第二个ajax</span>
            $.ajax({
                url: <span class="hljs-string">'http://www.cnblogs.com/silin6/source/'</span> + key,
                success: <span class="hljs-function"><span class="hljs-keyword">function</span> (<span class="hljs-params">data</span>) </span>{
                                <span class="hljs-built_in">console</span>.log(<span class="hljs-string">"i'm linkFly"</span>);<span class="hljs-comment">//后输出</span>
                }
            });
        }
    });
                                <span class="hljs-built_in">console</span>.log(<span class="hljs-string">'ok'</span>);<span class="hljs-comment">//ok会在ajax之前执行</span>
</code></pre>

                                <p>异步操作有点类似这一段代码被挂起，先执行后续的代码，直到异步得到响应（例如setTimeout要求的1s之后执行，ajax的服务器响应），这一段异步的代码才会执行。关于这一段异步代码的执行流程，请参阅JavaScript大名鼎鼎的：<a href="http://www.ruanyifeng.com/blog/2013/10/event_loop.html">Event Loop（事件轮询）</a>。</p>

                                <h2 id="promise">Promise的解决</h2>

                                <p>Promise优雅的修正了异步代码，我们使用Promise重写我们setTimeout的示例：</p>

<pre class="highlight-source"><code class="javascript hljs">    <span class="hljs-keyword">var</span> name,
    p = <span class="hljs-keyword">new</span> <span class="hljs-built_in">Promise</span>(<span class="hljs-function"><span class="hljs-keyword">function</span> (<span class="hljs-params">resolve</span>) </span>{
        setTimeout(<span class="hljs-function"><span class="hljs-keyword">function</span> (<span class="hljs-params"></span>) </span>{<span class="hljs-comment">//异步回调</span>
            resolve();
        }, <span class="hljs-number">1000</span>);<span class="hljs-comment">//1s后执行</span>
    });
    p.then(<span class="hljs-function"><span class="hljs-keyword">function</span> (<span class="hljs-params"></span>) </span>{
        name = <span class="hljs-string">'linkFly'</span>;
                                <span class="hljs-built_in">console</span>.log(name);<span class="hljs-comment">//linkFly</span>
    }).then(<span class="hljs-function"><span class="hljs-keyword">function</span> (<span class="hljs-params"></span>) </span>{
        name = <span class="hljs-string">'cnBlog'</span>;
                                <span class="hljs-built_in">console</span>.log(name);
    });
                                <span class="hljs-comment">//这段代码1s后会输出linkFly,cbBlog</span>
</code></pre>

                                <p>我们先不要太过在意Promise对象的API，后续会讲解，我们只需要知道这段代码完成了和之前同样的工作。我们的console.log(name)正确的输出了linkFly，并且我们还神奇的输出了cnBlog。</p>

                                <p>或许你觉得这段代码实在繁琐，还不如setTimeout来的痛快，那么我们再来改写上面的ajax：</p>

<pre class="highlight-source"><code class="javascript hljs">    <span class="hljs-keyword">var</span> ajax = <span class="hljs-function"><span class="hljs-keyword">function</span> (<span class="hljs-params">url</span>) </span>{
                                <span class="hljs-comment">//我们改写ajax，让它以Promise的方式工作</span>
                                <span class="hljs-keyword">return</span> <span class="hljs-keyword">new</span> <span class="hljs-built_in">Promise</span>(<span class="hljs-function"><span class="hljs-keyword">function</span> (<span class="hljs-params">resolve</span>) </span>{
            $.ajax({
                url: url,
                success: <span class="hljs-function"><span class="hljs-keyword">function</span> (<span class="hljs-params">data</span>) </span>{
                    resolve(data);
                }
            });
        });
    };
    ajax(<span class="hljs-string">'http://www.cnblogs.com/silin6/map'</span>)
        .then(<span class="hljs-function"><span class="hljs-keyword">function</span> (<span class="hljs-params">key</span>) </span>{
                                <span class="hljs-comment">//我们得到key，发起第二条请求</span>
                                <span class="hljs-keyword">return</span> ajax(<span class="hljs-string">'http://www.cnblogs.com/silin6/source/'</span> + key);
        })
        .then(<span class="hljs-function"><span class="hljs-keyword">function</span> (<span class="hljs-params">data</span>) </span>{
                                <span class="hljs-built_in">console</span>.log(data);<span class="hljs-comment">//这时候我们会接收到第二次ajax返回的数据</span>
        });
</code></pre>

                                <p>或许它晦涩难懂，那么我们尝试用setTimeout来模拟这次的ajax，这个例子演示了Promise数据的传递，一如ajax：</p>

<pre class="highlight-source"><code class="javascript hljs">    <span class="hljs-keyword">var</span> name,
        ajax = <span class="hljs-function"><span class="hljs-keyword">function</span> (<span class="hljs-params">data</span>) </span>{
                                <span class="hljs-keyword">return</span> <span class="hljs-keyword">new</span> <span class="hljs-built_in">Promise</span>(<span class="hljs-function"><span class="hljs-keyword">function</span> (<span class="hljs-params">resolve</span>) </span>{
                setTimeout(<span class="hljs-function"><span class="hljs-keyword">function</span> (<span class="hljs-params"></span>) </span>{<span class="hljs-comment">//我们使用setTimeout模拟ajax</span>
                    resolve(data);
                }, <span class="hljs-number">1000</span>);<span class="hljs-comment">//1s后执行</span>
            });
        };
    ajax(<span class="hljs-string">'linkFly'</span>).then(<span class="hljs-function"><span class="hljs-keyword">function</span> (<span class="hljs-params">name</span>) </span>{
                                <span class="hljs-keyword">return</span> ajax(<span class="hljs-string">"i'm "</span> + name);<span class="hljs-comment">//模拟第二次ajax</span>
    }).then(<span class="hljs-function"><span class="hljs-keyword">function</span> (<span class="hljs-params">value</span>) </span>{
                                <span class="hljs-comment">//2s后，输出i'm linkFly</span>
                                <span class="hljs-built_in">console</span>.log(value);
    });
</code></pre>

                                <p>上面的代码，从<em>代码语义</em>上达到了下面的流程：</p>

                                <p><img src="http://images.cnblogs.com/cnblogs_com/silin6/596820/o_Promise.png" alt="Promise" title=""></p>

                                <p>
                                    我们仅观察代码就知道现在的它变得非常优雅，两次异步的代码被完美的抹平。但我们应该时刻谨记，Promise改变的是你异步的代码和编程思想，而并没有改变异步代码的执行——它是一种由卓越的编程思想所衍生的对象。
                                    下面一张图演示了普通异步回调和Promise异步的区别，Promise实现的异步从代码运行上来说并无太大区别，但从编程思想上来说差异巨大。
                                    <img src="http://images.cnblogs.com/cnblogs_com/silin6/596820/o_PromiseAndCallback.png" alt="Promise" title="">
                                </p>

                                <h2 id="ecmascript6promise">ECMAScript 6 Promise</h2>

                                <p>
                                    Promise对象代表了未来某个将要发生的事件（通常是一个异步操作），抹平了异步代码的金字塔，它从模型上解决了异步代码产生的"回调金字塔"。
                                    Promise是ECMAScript 6规范内定义的，所以请使用现代浏览器测试，它的兼容性可以在<a href="http://caniuse.com/#search=Promise">这里查看</a>。
                                </p>

                                <p>
                                    <strong>Promise.constructor</strong>
                                    Promise是一个对象，它的构造函数接收一个回调函数，这个回调函数参数有两个函数：分别在成功状态下执行和失败状态下执行，Promise有三个状态，分别为：等待态（Pending）、执行态（Fulfilled）和拒绝态（Rejected）。
                                </p>

<pre class="highlight-source"><code class="javascript hljs">    <span class="hljs-keyword">var</span> p = <span class="hljs-keyword">new</span> <span class="hljs-built_in">Promise</span>(<span class="hljs-function"><span class="hljs-keyword">function</span> (<span class="hljs-params">resolve,reject</span>) </span>{
                                <span class="hljs-built_in">console</span>.log(<span class="hljs-built_in">arguments</span>);
                                <span class="hljs-comment">//resolve表示成功状态下执行</span>
                                <span class="hljs-comment">//reject表示失败状态下执行</span>
    });
</code></pre>

                                <p>
                                    传递的这个回调函数，等同被Promise重新封装，并传递了两个参数回调，这两个参数用于驱动Promise数据的传递。resolve和reject本身承载着触发器的使命：
                                    - 默认的Promise对象是<em>等待态（Pending）</em>。
                                    - 调用resolve()表示这个Promise进入<em>执行态（Fulfilled）</em>
                                    - 调用reject()表示这个promise()进入<em>拒绝态（Rejected）</em>
                                    - Promise对象可以从等待状态下进入到执行态和拒绝态，并且无法回退。
                                    - 而执行态和拒绝态不允许互相转换（例如执行态转换到拒绝态）。
                                </p>

                                <p><strong>Promise.prototype.then</strong></p>

                                <p>
                                    生成的promise实例（如上面的变量p）拥有方法then()，then()方法是Promise对象的核心，它返回一个新的Promise对象，因此可以像jQuery一样链式操作，非常优雅。
                                    Promise是双链的，所以then()方法接受两个参数，分别表示：
                                    - <em>执行态（Fulfilled）</em>下执行的回调函数
                                    - <em>拒绝态（Rejected）</em>下执行的回调函数。
                                </p>

<pre class="highlight-source"><code class="javascript hljs">    p.then(<span class="hljs-function"><span class="hljs-keyword">function</span> (<span class="hljs-params"></span>) </span>{
                                <span class="hljs-comment">//我们返回一个promise</span>
                                <span class="hljs-keyword">return</span> <span class="hljs-keyword">new</span> <span class="hljs-built_in">Promise</span>(<span class="hljs-function"><span class="hljs-keyword">function</span> (<span class="hljs-params">resolve</span>) </span>{
            setTimeout(<span class="hljs-function"><span class="hljs-keyword">function</span> (<span class="hljs-params"></span>) </span>{
                resolve(<span class="hljs-string">'resolve'</span>);
            }, <span class="hljs-number">1000</span>);<span class="hljs-comment">//异步1s</span>
        });
    }, <span class="hljs-function"><span class="hljs-keyword">function</span> (<span class="hljs-params"></span>) </span>{
                                <span class="hljs-built_in">console</span>.log(<span class="hljs-string">'rejected'</span>);
    })  <span class="hljs-comment">//链式回调</span>
        .then(<span class="hljs-function"><span class="hljs-keyword">function</span> (<span class="hljs-params">state</span>) </span>{
                                <span class="hljs-built_in">console</span>.log(state);<span class="hljs-comment">//如果为执行态，输出resolve</span>
        }, <span class="hljs-function"><span class="hljs-keyword">function</span> (<span class="hljs-params">data</span>) </span>{
                                <span class="hljs-built_in">console</span>.log(data);<span class="hljs-comment">//如果为拒绝态，输出undefined</span>
        });;
</code></pre>

                                <p>then()方法的返回值由它相应状态下执行的函数决定：这个函数返回undefined，则then()方法构建一个默认的Promise对象，并且这个对象拥有then()方法所属的Promise对象的状态。</p>

<pre class="highlight-source"><code class="javascript hljs">    <span class="hljs-keyword">var</span> p = <span class="hljs-keyword">new</span> <span class="hljs-built_in">Promise</span>(<span class="hljs-function"><span class="hljs-keyword">function</span> (<span class="hljs-params">resolve</span>) </span>{
        resolve();<span class="hljs-comment">//直接标志执行态</span>
    }), temp;
    temp = p.then(<span class="hljs-function"><span class="hljs-keyword">function</span> (<span class="hljs-params"></span>) </span>{
                                <span class="hljs-comment">//传入执行态函数，不返回值</span>
    });
    temp.then(<span class="hljs-function"><span class="hljs-keyword">function</span> (<span class="hljs-params"></span>) </span>{
                                <span class="hljs-built_in">console</span>.log(<span class="hljs-string">'fulfilled'</span>);<span class="hljs-comment">//拥有p的状态</span>
    });
                                <span class="hljs-built_in">console</span>.log(temp === p);<span class="hljs-comment">//默认构建的promise，但已经和p不是同一个对象，输出false</span>
</code></pre>

                                <p>如果对应状态所执行的函数返回一个全新的Promise对象，则会覆盖掉当前Promise，代码如下：</p>

<pre class="highlight-source"><code class="javascript hljs">    <span class="hljs-keyword">var</span> p = <span class="hljs-keyword">new</span> <span class="hljs-built_in">Promise</span>(<span class="hljs-function"><span class="hljs-keyword">function</span> (<span class="hljs-params">resolve</span>) </span>{
        resolve();<span class="hljs-comment">//直接标志执行态</span>
    }), temp;
    temp = p.then(<span class="hljs-function"><span class="hljs-keyword">function</span> (<span class="hljs-params"></span>) </span>{
                                <span class="hljs-comment">//返回新的promise对象，和p的状态无关</span>
                                <span class="hljs-keyword">return</span> <span class="hljs-keyword">new</span> <span class="hljs-built_in">Promise</span>(<span class="hljs-function"><span class="hljs-keyword">function</span> (<span class="hljs-params">resolve, reject</span>) </span>{
            reject();<span class="hljs-comment">//标志拒绝态</span>
        });
    });
    temp.then(<span class="hljs-function"><span class="hljs-keyword">function</span> (<span class="hljs-params"></span>) </span>{
                                <span class="hljs-built_in">console</span>.log(<span class="hljs-string">'fulfilled'</span>);
    }, <span class="hljs-function"><span class="hljs-keyword">function</span> (<span class="hljs-params"></span>) </span>{
                                <span class="hljs-built_in">console</span>.log(<span class="hljs-string">'rejected'</span>);<span class="hljs-comment">//输出</span>
    });
</code></pre>

                                <p>即then()方法传递的进入的回调函数，如果返回promise对象，则then()方法返回这个promise对象，否则将默认构建一个新的promise对象，并继承调用then()方法的promise的状态。</p>

                                <p>我们应该清楚Promise的使命，抹平了异步代码的回调金字塔，我们会有很多依赖上一层异步的代码：</p>

<pre class="highlight-source"><code class="javascript hljs">    <span class="hljs-keyword">var</span> url = <span class="hljs-string">'http://www.cnblogs.com/silin6/'</span>;
    ajax(url, <span class="hljs-function"><span class="hljs-keyword">function</span> (<span class="hljs-params">data</span>) </span>{
        ajax(url + data, <span class="hljs-function"><span class="hljs-keyword">function</span> (<span class="hljs-params">data2</span>) </span>{
            ajax(url + data2, <span class="hljs-function"><span class="hljs-keyword">function</span> (<span class="hljs-params">data3</span>) </span>{
                ajax(url + data3, <span class="hljs-function"><span class="hljs-keyword">function</span> (<span class="hljs-params"></span>) </span>{
                                <span class="hljs-comment">//回调金字塔</span>
                });
            });
        });
    });
</code></pre>

                                <p>使用Promise则抹平了代码：</p>

<pre class="highlight-source"><code class="javascript hljs">    promise.then(<span class="hljs-function"><span class="hljs-keyword">function</span> (<span class="hljs-params">data</span>) </span>{
                                <span class="hljs-keyword">return</span> ajax(url + data);
    }).then(<span class="hljs-function"><span class="hljs-keyword">function</span> (<span class="hljs-params">data2</span>) </span>{
                                <span class="hljs-keyword">return</span> ajax(url + data2);
    }).then(<span class="hljs-function"><span class="hljs-keyword">function</span> (<span class="hljs-params">data3</span>) </span>{
                                <span class="hljs-keyword">return</span> ajax(url + data3);
    }).then(<span class="hljs-function"><span class="hljs-keyword">function</span> (<span class="hljs-params">data</span>) </span>{
                                <span class="hljs-comment">//扁平化代码</span>
    });
</code></pre>

                                <p>Promise还有更多更强大的API。但本文的目的旨在让大家感受到Promise的魅力，而并非讲解Promise对象自身的API，关于Promise其他辅助实现API请查阅本文最下方的引用章节，Promise其他API如下：</p>

                                <ul>
                                    <li><code>Promise.prototype.catch()</code>：用于指定发生错误时的回调函数（捕获异常），并具有冒泡性质。</li>
                                    <li><code>Promise.all()</code>，<code>Promise.race()</code>：Promise.all方法用于将多个Promise实例，包装成一个新的Promise实例。</li>
                                    <li><code>Promise.resolve()</code>，<code>Promise.reject()</code>:将现有对象转为Promise对象。</li>
                                </ul>

                                <p>希望大家一点点的接受Promise，所以没有讲太多，我们对于Promise的理解不应该仅仅是一个异步模型，我们更关注应该是Promise/Deferred的编程思想，所以后续几篇会逐渐深入讲解Promise的前生今世。</p>

                                <h2 id="">参考和引用</h2>

                                <blockquote>
                                    <ul>
                                        <li><a href="http://es6.ruanyifeng.com/#docs/promise">ECMAScript 6 入门 - Promise对象</a></li>
                                        <li><a href="http://www.ituring.com.cn/article/66566#">Promise/A+规范</a></li>
                                        <li><a href="http://www.cnblogs.com/rubylouvre/p/3658441.html">JavaScript框架设计-第12章 异步处理</a></li>
                                        <li><a href="https://www.dmfeel.com/post/536799f91f1bf49646000001">Promise启示录</a></li>
                                    </ul>
                                </blockquote>


                            </div>
                        </section>
                        <div class="l-author">
                            <div>作者：linkFly</div>
                            <div>原文：<a href="http://www.cnblogs.com/silin6/p/4288967.html">http://www.cnblogs.com/silin6/p/4288967.html</a></div>
                            <div>出处：<a href="http://www.cnblogs.com/silin6/">www.cnblogs.com/silin6/</a></div>
                            <div>声明：嘿！你都拷走上面那么一大段了，我觉得你应该也不介意顺便拷走这一小段，希望你能够在每一次的引用中都保留这一段声明，尊重作者的辛勤劳动成果，本文与博客园共享。</div>
                        </div>
                    </div>
                </article>
                <section class="blog-more-info">
                    <div class="blog-more-head">
                        <div class="blog-comment-txt">
                            <span>评论(0)</span>
                        </div>
                        <ul class="blog-info afterClear">
                            <li class="bi-l">
                                <a class="licenses licenses-cc" target="_blank" href="/Home/Cl?url=http%3A%2F%2Fcreativecommons.org%2Flicenses%2Fby%2F3.0%2Fcn%2F&amp;sgs=s-licenses" title="本文采用创作共用署名3.0中国大陆版许可证（Creative Commons Attribution 3.0 China Mainland License）授权">CC BY 3.0 CN</a>
                            </li>
                            <li title="浏览"><a href="javascript:;" class="oprater"><i class="fa fa-eye"></i><span>15</span></a></li>
                            <li title="like"><a href="javascript:;" class="oprater active"><i class="fa fa-heart"></i><span>12</span></a></li>
                            <li><a href="javascript:;" class="blog-info-more">查看更多我的文章</a></li>
                            <li class="blog-info-date"><time>2014/10/08 00:21:51</time></li>
                        </ul>
                    </div>
                    <div class="blog-more-comment">
                        <div class="blog-comment-content">
                            <div class="blog-comment-bar">
                                <form action="/" class="comment-form">
                                    <ul class="blog-comment-info" style="">
                                        <li>
                                            <input placeholder="名称" class="form-control" />
                                        </li>
                                        <li>
                                            <input type="email" placeholder="Email" class="form-control" />
                                        </li>
                                        <li>
                                            <input type="url" placeholder="您的站点" class="form-control" />
                                        </li>
                                        <li>
                                            <input type="checkbox" id="comment-cookie" checked="checked" /><label for="comment-cookie">下次自动填写</label>
                                        </li>
                                    </ul>
                                    <div class="comment-bar">
                                        <textarea name="comment" class="form-control cmt-context" id="comment-context" placeholder="名称和Email（不会公开）必填，保存信息会保存这些信息，下次自动填充"></textarea>
                                        <div class="comment-more-bar">
                                            <div class="comment-more-bg">
                                                <ul style="" class="loading-line">
                                                    <li class="loading-dot">1</li>
                                                    <li class="loading-dot">2</li>
                                                    <li class="loading-dot">3</li>
                                                    <li class="loading-dot">4</li>
                                                    <li class="loading-dot">5</li>
                                                </ul>
                                            </div>
                                            <input type="button" class="said-btn ct-submit said-btn-default" id="comment-submit" value="提交评论" />
                                        </div>
                                    </div>
                                </form>
                            </div>
                            <div class="blog-comment-context">
                                <ul class="comment-list">
                                    <li class="comment-item">
                                        <div class="ctitem-content">
                                            <div class="ct-top said-ellipsis">
                                                <a href="javascript:;" class="ct-name" target="_blank" title="查看ta的站点">linkFly</a>
                                            </div>
                                            <div class="ct-context">
                                                <p>重构是在不改变程序行为的基础上进行小的改动，是代码逐渐改善的过程。移除长期累积下来的烂码，以得到更清晰和更容易维护，除错以及添加新功能的代码，这做法不能单纯只出现在编码的后期，甚至是你意识到你的代码已经无从再下手非重写不可的时候，而是从开始开发起，逐渐积累，逐渐修改。以前因为日常编码的随意性，导致问题日益积累，逐步扩散，最后只能推倒重来。如果时间经受不起推倒重来，你别无选择，唯一实现的选择就是重构。</p>
                                            </div>

                                            <div class="ct-footer">
                                                <span class="ct-num">#1</span>
                                                <time class="ct-time">2小时前</time>
                                                <a href="javascript:;" class="ct-reply">回复</a>
                                            </div>
                                        </div>
                                    </li>
                                    <li class="comment-item">
                                        <div class="ctitem-content">
                                            <div class="ct-top said-ellipsis">
                                                <a href="javascript:;" class="ct-name" style="display: none;">linkFly</a>
                                                <span class="ct-name ">linkFly</span>
                                            </div>
                                            <p class="ct-context wordbreak">linkFlylinkFlylinkFlylinkFlylinkFlylinkFlylinkFlylinkFlylinkFlylinkFlylinkFlylinkFlylinkFlylinkFlylinkFlylinkFlylinkFlylinkFlylinkFlylinkFlylinkFlylinkFlylinkFlylinkFlylinkFlylinkFlylinkFlylinkFlylinkFlylinkFlylinkFlylinkFlylinkFlylinkFlylinkFlylinkFlylinkFlylinkFlylinkFlylinkFly</p>
                                            <div class="ct-footer">
                                                <span class="ct-num">#2 </span>
                                                <time class="ct-time">昨天</time>
                                            </div>
                                        </div>
                                    </li>
                                    <li class="comment-item">
                                        <div class="ctitem-content">
                                            <div class="ct-top said-ellipsis">
                                                <a href="javascript:;" class="ct-name" style="display: none;" target="_blank" title="查看ta的站点">linkFly</a>
                                                <a class="ct-name " href="/">linkFly</a>
                                            </div>
                                            <p class="ct-context wordbreak">重构是在不改变程序行为的基础上进行小的改动，是代码逐渐改善的过程。移除长期累积下来的烂码，以得到更清晰和更容易维护，除错以及添加新功能的代码，这做法不能单纯只出现在编码的后期，甚至是你意识到你的代码已经无从再下手非重写不可的时候，而是从开始开发起，逐渐积累，逐渐修改。以前因为日常编码的随意性，导致问题日益积累，逐步扩散，最后只能推倒重来。如果时间经受不起推倒重来，你别无选择，唯一实现的选择就是重构。</p>
                                            <div class="ct-footer">
                                                <span class="ct-num">#3</span>
                                                <time class="ct-time">昨天</time>
                                                <a href="javascript:;" class="ct-reply"><i class="fa fa-comments" aria-hidden="true"></i>回复</a>
                                            </div>
                                            <!--二级评论-->
                                            <div class="comment-reply">
                                                <div class="arrow-border cr-arrow">
                                                </div>
                                                <ul class="cr-container">
                                                    <li class="cr-item">
                                                        <div class="cr-content">
                                                            <div class="ct-top said-ellipsis">
                                                                <a href="/" class="ct-name " target="_blank" title="查看ta的站点">风住过的地方</a>
                                                            </div>
                                                            <p class="cr-context wordbreak">重构是在不改变程序行为的基础上进行小的改动，是代码逐渐改善的过程。移除长期累积下来的烂码，以得到更清晰和更容易维护，除错以及添加新功能的代码，这做法不能单纯只出现在编码的后期，甚至是你意识到你的代码已经无从再下手非重写不可的时候，而是从开始开发起，逐渐积累，逐渐修改。以前因为日常编码的随意性，导致问题日益积累，逐步扩散，最后只能推倒重来。如果时间经受不起推倒重来，你别无选择，唯一实现的选择就是重构。</p>
                                                            <div class="cr-footer">
                                                                <time class="cr-time">昨天</time>
                                                                <a class="cr-reply" href="javascript:;"><i class="fa fa-comments" aria-hidden="true"></i>回复</a>
                                                            </div>
                                                        </div>
                                                    </li>
                                                    <li class="cr-item">
                                                        <div class="cr-content">
                                                            <div class="ct-top said-ellipsis">
                                                                <span class="ct-name ">linkFly</span>&nbsp;&nbsp;回复&nbsp;&nbsp;<a style="" class="ct-name" href="javascript:;">风住过的地方</a>

                                                            </div>
                                                            <p class="cr-context wordbreak">linkFlylinkFlylinkFlylinkFlylinkFlylinkFlylinkFlylinkFlylinkFlylinkFlylinkFlylinkFlylinkFlylinkFlylinkFlylinkFlylinkFlylinkFly</p>
                                                            <div class="cr-footer">
                                                                <time class="cr-time">昨天</time>
                                                            </div>
                                                        </div>
                                                    </li>
                                                </ul>
                                            </div>
                                        </div>
                                    </li>
                                    <li class="comment-item">
                                        <div class="ctitem-content">
                                            <div class="ct-top said-ellipsis">
                                                <a href="javascript:;" class="ct-name" target="_blank" title="查看ta的站点">linkFly</a>
                                            </div>
                                            <p class="ct-context wordbreak">重构是在不改变程序行为的基础上进行小的改动，是代码逐渐改善的过程。移除长期累积下来的烂码，以得到更清晰和更容易维护，除错以及添加新功能的代码，这做法不能单纯只出现在编码的后期，甚至是你意识到你的代码已经无从再下手非重写不可的时候，而是从开始开发起，逐渐积累，逐渐修改。以前因为日常编码的随意性，导致问题日益积累，逐步扩散，最后只能推倒重来。如果时间经受不起推倒重来，你别无选择，唯一实现的选择就是重构。</p>
                                            <div class="ct-footer">
                                                <span class="ct-num">#1</span>
                                                <time class="ct-time">2小时前</time>
                                                <a href="javascript:;" class="ct-reply"><i class="fa fa-comments" aria-hidden="true"></i>回复</a>
                                            </div>
                                            <!--回复评论-->
                                            <div class="comment-reply">
                                                <div class="arrow-border rc-arrow">
                                                </div>
                                                <div class="reply-bar">
                                                    <form action="/" class="comment-form" name="reply-form">
                                                        <ul class="blog-comment-info" style="">
                                                            <li>
                                                                <input placeholder="名称" name="reply-name" class="form-control" disabled />
                                                            </li>
                                                            <li>
                                                                <input type="email" placeholder="Email" name="reply-email" class="form-control" disabled />
                                                            </li>
                                                            <li>
                                                                <input type="url" placeholder="您的站点" name="reply-site" class="form-control" disabled />
                                                            </li>
                                                            <li>
                                                                <input type="checkbox" id="Checkbox1" disabled /><label for="Checkbox1">下次自动填写</label>
                                                            </li>
                                                        </ul>
                                                        <div class="comment-bar">
                                                            <textarea name="comment" id="reply-context" class="form-control cmt-context" placeholder="名称和Email（不会公开）必填，保存信息会保存这些信息，下次自动填充" disabled></textarea>
                                                            <div class="comment-more-bar">
                                                                <div class="comment-more-bg">
                                                                    <ul style="" class="loading-line">
                                                                        <li class="loading-dot">1</li>
                                                                        <li class="loading-dot">2</li>
                                                                        <li class="loading-dot">3</li>
                                                                        <li class="loading-dot">4</li>
                                                                        <li class="loading-dot">5</li>
                                                                    </ul>
                                                                </div>
                                                                <button class="said-btn ct-submit said-btn-default" id="reply-submit" disabled><i class="fa fa-refresh fa-spin fa-fw"></i>&nbsp;提交评论</button>
                                                            </div>
                                                        </div>
                                                    </form>
                                                </div>
                                            </div>
                                        </div>
                                    </li>
                                    <li class="comment-item">
                                        <div class="ctitem-content">
                                            <div class="ct-top said-ellipsis">
                                                <a href="javascript:;" class="ct-name" style="display: none;" target="_blank" title="查看ta的站点">linkFly</a>
                                                <a class="ct-name " href="/">linkFly</a>
                                            </div>
                                            <p class="ct-context wordbreak">重构是在不改变程序行为的基础上进行小的改动，是代码逐渐改善的过程。移除长期累积下来的烂码，以得到更清晰和更容易维护，除错以及添加新功能的代码，这做法不能单纯只出现在编码的后期，甚至是你意识到你的代码已经无从再下手非重写不可的时候，而是从开始开发起，逐渐积累，逐渐修改。以前因为日常编码的随意性，导致问题日益积累，逐步扩散，最后只能推倒重来。如果时间经受不起推倒重来，你别无选择，唯一实现的选择就是重构。</p>
                                            <div class="ct-footer">
                                                <span class="ct-num">#3</span>
                                                <time class="ct-time">昨天</time>
                                                <a href="javascript:;" class="ct-reply">回复</a>
                                            </div>
                                            <!--二级评论-->
                                            <div class="comment-reply">
                                                <div class="arrow-border rc-arrow">
                                                </div>
                                                <div class="reply-bar">
                                                    <form action="/" class="comment-form" name="reply-form">
                                                        <ul class="blog-comment-info" style="">
                                                            <li>
                                                                <input placeholder="名称" name="reply-name" class="form-control" />
                                                            </li>
                                                            <li>
                                                                <input type="email" placeholder="Email" name="reply-email" class="form-control" />
                                                            </li>
                                                            <li>
                                                                <input type="url" placeholder="您的站点" name="reply-site" class="form-control" />
                                                            </li>
                                                            <li>
                                                                <input type="checkbox" id="Checkbox2" /><label for="comment-cookie">下次自动填写</label>
                                                            </li>
                                                        </ul>
                                                        <div class="comment-bar">
                                                            <textarea name="comment" id="child-submit" class="form-control cmt-context" placeholder="名称和Email（不会公开）必填，保存信息会保存这些信息，下次自动填充"></textarea>
                                                            <div class="comment-more-bar">
                                                                <div class="comment-more-bg">
                                                                    <ul style="" class="loading-line">
                                                                        <li class="loading-dot">1</li>
                                                                        <li class="loading-dot">2</li>
                                                                        <li class="loading-dot">3</li>
                                                                        <li class="loading-dot">4</li>
                                                                        <li class="loading-dot">5</li>
                                                                    </ul>
                                                                </div>
                                                                <span></span>
                                                                <input type="button" class="said-btn ct-submit said-btn-default" id="Submit1" value="提交评论" />
                                                            </div>
                                                        </div>
                                                    </form>
                                                </div>
                                                <ul class="cr-container">
                                                    <li class="cr-item">
                                                        <div class="cr-content">
                                                            <div class="ct-top said-ellipsis">
                                                                <a href="/" class="ct-name " target="_blank" title="查看ta的站点">风住过的地方</a>
                                                            </div>
                                                            <p class="cr-context wordbreak">重构是在不改变程序行为的基础上进行小的改动，是代码逐渐改善的过程。移除长期累积下来的烂码，以得到更清晰和更容易维护，除错以及添加新功能的代码，这做法不能单纯只出现在编码的后期，甚至是你意识到你的代码已经无从再下手非重写不可的时候，而是从开始开发起，逐渐积累，逐渐修改。以前因为日常编码的随意性，导致问题日益积累，逐步扩散，最后只能推倒重来。如果时间经受不起推倒重来，你别无选择，唯一实现的选择就是重构。</p>
                                                            <div class="cr-footer">
                                                                <time class="cr-time">昨天</time>
                                                                <a class="cr-reply" href="javascript:;">回复</a>
                                                            </div>
                                                        </div>
                                                    </li>
                                                    <li class="cr-item">
                                                        <div class="cr-content">
                                                            <div class="ct-top said-ellipsis">
                                                                <span class="ct-name ">linkFly</span>&nbsp;&nbsp;回复&nbsp;&nbsp;<a style="" class="ct-name" href="javascript:;">风住过的地方</a>

                                                            </div>
                                                            <p class="cr-context wordbreak">linkFlylinkFlylinkFlylinkFlylinkFlylinkFlylinkFlylinkFlylinkFlylinkFlylinkFlylinkFlylinkFlylinkFlylinkFlylinkFlylinkFlylinkFly</p>
                                                            <div class="cr-footer">
                                                                <time class="cr-time">昨天</time>
                                                            </div>
                                                        </div>
                                                    </li>
                                                </ul>
                                            </div>
                                        </div>
                                    </li>
                                </ul>
                            </div>
                        </div>
                    </div>
                </section>

            </section>

        </section>
    </section>
    <footer id="said-footer">
        <a href="/" title="听说" class="logo"></a>
    </footer>
</body>
</html>
